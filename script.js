var array = {
    "song": [{
            "name": "Raatan Lambiyan",
            "source": "Raatan Lambiyan.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/10q3Zj1352/q3ZR6q4035/size_l_1629048201.webp",
            "singer": "Tanishk bagchi, Jubin Nautiyal"

        }, {
            "name": "Dil ko karaar Aaya",
            "source": "Dil Ko Karaar Aaya.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113462/143979-dil-ko-karaar-aaya-neha-kakkar-mp3-song-300.jpg",
            "singer": "Neha Kakkar, Rajat nagpal"

        }, {
            "name": "Taro ke shehar",
            "source": "Taro ke shehar.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/0wrb4kNWLg/wrb476lyWL/size_l.webp",
            "singer": "Neha Kakkar, Jubin Nautiyal"

        }, {
            "name": "Baarish ban jaana",
            "source": "Baarish ban jaana.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/ogNWkLDbmX/NWkLm5Vkbm/size_l.webp",
            "singer": "Payal Dev, Stebin ben"

        }, {
            "name": "Ranjha",
            "source": "Ranjha.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/song/XYybzNrb2g/ybzEg61rW2/size_m_1628084846.webp",
            "singer": "Jasleen Royal, B praak"

        }, {
            "name": "Nayan",
            "source": "Nayan.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/w4MKPgOboj/4MKPmOLx3o/size_l_1607405239.webp",
            "singer": "Dhvani Bhanushali, Jubin Nautiyal"

        }, {
            "name": "Kinna Sona",
            "source": "Kinna Sona.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/song/9En3peWXDV/n3pNQ276bX/size_l_1573026994.webp",
            "singer": "Meet Bros,  Dhvani Bhanushali, Jubin Nautiyal"

        }, {
            "name": "Sakhiyan 2.0",
            "source": "Sakhiyan 2.0.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/song/qa4WEqWP1p/4WEgy58xKP/size_l_1628837528.webp",
            "singer": "Maninder Buttar, Zara Khan"

        }, {
            "name": "Thoda Thoda Pyaar",
            "source": "Thoda Thoda Pyaar.mp3",
            "image": "https://images.hungama.com/c/1/a69/a53/62418415/62418415_300x300.jpg ",
            "singer": "Stebin Ben, Nilesh Ahuja"

        }, {
            "name": "Is Qadar",
            "source": "Is Qadar.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/4Z9bqZoKyQ/9bqgozd13y/size_l.webp",
            "singer": "Tulsi Kumar, Darshan Raval"

        },
        //---------------2-------------------------------------------------------------------------
        {
            "name": "Mann Bharryaa 2.0",
            "source": "Mann Bharryaa.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113558/145902-mann-bharryaa-2-shershaah-mp3-song-300.jpg",
            "singer": "B. Praak"

        }, {
            "name": "Hamari Adhuri Kahani",
            "source": "Hamari Adhuri Kahani.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/12986/thumb-hamari-adhuri-kahani-2015-hindi-mp3-songs-download111-300.jpg",
            "singer": "Arijit Singh, Jeet Gannguli"

        }, {
            "name": " Soch Na Sake ",
            "source": "Soch Na Sake.mp3",
            "image": "https://i.scdn.co/image/ab67616d0000b27300a1a948e2848d28c4538fe1",
            "singer": "Tulsi Kumar"

        }, {
            "name": "Khushi Ke Pal Kahan Dhundu",
            "source": "Khushi Ke Pal Kahan Dhundu.mp3",
            "image": "https://i.ytimg.com/vi/HrDgxVx1HUM/maxresdefault.jpg",
            "singer": "Arijit Singh, Nandani Shrikar"

        }, {
            "name": "Hamdard",
            "source": "Hamdard.mp3",
            "image": "https://img.wynk.in/unsafe/275x275/filters:no_upscale():format(webp)/http://s3-ap-south-1.amazonaws.com/wynk-music-cms/music/ekvillain.jpg",
            "singer": "Arijit Singh,Mithoon"

        }, {
            "name": "Thodi Jagah",
            "source": "Thodi Jagah.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113434/143285-thodi-jagah-marjaavaan-mp3-song-300.jpg",
            "singer": "Arijit Singh"

        }, {
            "name": "Channa Mereya",
            "source": "Channa Mereya.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/qa4WEqqWP1/a4WElPNq3P/size_l.webp",
            "singer": "Arijit Singh, Pritam"

        }, {
            "name": "Agar tum saath ho",
            "source": "agar tum saath ho.mp3",
            "image": "https://mymp3bhojpuri.in/siteuploads/thumb/sft61/30278_resize2x_130x130.webp",
            "singer": "Arijit Singh, Alka Yagnik"

        }, {
            "name": "Main Dhoondne Ko Zamaane Mein",
            "source": "Main Dhoondne Ko Zamaane Mein.mp3",
            "image": "https://i0.wp.com/filmisongs.com/wp-content/uploads/2021/09/Main-Dhoondne-Ko-Zamaane-Mein-Mp3-Song-Download.jpg?w=450&ssl=1",
            "singer": "Arijit Singh"

        }, {
            "name": "Kaash Aisa Hota",
            "source": "Kaash Aisa Hota.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/14642/118872-kaash-aisa-hota-darshan-raval-mp3-song-300.jpg",
            "singer": "Darshan Raval, Arijit Singh, Amaal mallik"

        },
        //----------------------------------------------------------------------------------------
        {
            "name": "Baar Baar Dekho",
            "source": "Baar Baar Dekho.mp3",
            "image": "https://i.ytimg.com/vi/mpjNh-uGBY4/maxresdefault.jpg",
            "singer": "Armaan Malik, Neeti Mohan"

        }, {
            "name": "Makhna",
            "source": "Makhna.mp3",
            "image": "https://pagalsong.in/uploads//thumbnails/300x300/id3Picture_2086558149.jpg",
            "singer": "Tanishk Bagchi, Yasser Desai, Asses Kaur"

        }, {
            "name": "Illahi",
            "source": "Ilahi.mp3",
            "image": "https://i.ytimg.com/vi/6w67NOaRe-w/maxresdefault.jpg",
            "singer": "Arijit Singh"

        }, {
            "name": "Sooraj Dooba Hain Yaaron ",
            "source": "Sooraj Dooba Hain Yaaron.mp3",
            "image": "https://upload.wikimedia.org/wikipedia/en/8/89/Sooraj_Dooba_Hain.jpg",
            "singer": "Arijit Singh, Aditi Singh Sharma, Amaal mallik"

        }, {
            "name": "kabira",
            "source": "kabira.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/7920/thumb-yeh-jawaani-hai-deewani-2013-300.jpg",
            "singer": "Tochi Raina Rekha Bhardwaj"

        }, {
            "name": "Subah Subah",
            "source": "Subah Subah.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/song/Bp1bAynb02/1bADmwQ7W0/size_l_1514974170.webp",
            "singer": "Arijit Singh, Amaal Mallik, Prakriti Kakar"

        }, {
            "name": "Phir Se Ud Chala  ",
            "source": "Phir Se Ud Chala.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/6Zxb2r7b9w/Zxb2RAqb9w/size_l.webp",
            "singer": "Mohit Chauhan"

        }, {
            "name": "Love You Zindagi",
            "source": "Love You Zindagi.mp3",
            "image": "https://pagalsong.in/uploads//thumbnails/300x300/id3Picture_1932045784.jpg",
            "singer": "Amit Trivedi, Jasleen Kaur Royal"

        }, {
            "name": "Safarnama",
            "source": "Safarnama.mp3",
            "image": "http://4.bp.blogspot.com/-QPYFOAbZ_wU/Vl_-g-1X7nI/AAAAAAAAEAw/Fu5eFdEo3yk/s1600/safarnama-tamasha.jpg",
            "singer": "Lucky Ali, Rahman"

        }, {
            "name": "Hawayein",
            "source": "Hawayein.mp3",
            "image": "https://c.saavncdn.com/260/Hawayein-From-Jab-Harry-Met-Sejal--Hindi-201720170726112607-500x500.jpg",
            "singer": "Pritam, Arijit Singh"

        },
        //----------------------------------------------------------------------------------------
        {
            "name": "Param Sundari",
            "source": "Param Sundari.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/2lV3dl13Rg/V3dldLBE3R/size_l.webp",
            "singer": "A.R.Rahman, Shreya Ghoshal"

        }, {
            "name": "Illegal Weapon 2.0",
            "source": "Illegal Weapon 2.0.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113457/143515-illegal-weapon-2-street-dancer-3d-mp3-song-300.jpg",
            "singer": "Jasmine Sandlas, Garry Sandhu, Tanishk Bagchi, Intense"

        }, {
            "name": "Garmi",
            "source": "Garmi.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113457/143498-garmi-street-dancer-3d-mp3-song-300.jpg",
            "singer": "Neha Kakkar, Badshah"

        }, {
            "name": "Naach Meri Rani ",
            "source": "Naach Meri Rani.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/albums/d41WjznWPL/41Wj2qgNWP/size_l.webp",
            "singer": "Guru Randhawa, Tanishk Bagchi, Nikhita Gandhi"

        }, {
            "name": "Aankh Marey",
            "source": "Aankh Marey.mp3",
            "image": "https://a10.gaanacdn.com/gn_img/song/lJvKa56KDV/vKalOg7xbD/size_m_1544078542.webp",
            "singer": "Neha Kakkar, Kumar Sanu, Mika Singh"

        }, {
            "name": "Dilbar",
            "source": "Dilbar.mp3",
            "image": "https://pagalsong.in/uploads//thumbnails/300x300/id3Picture_1963553065.jpg",
            "singer": "Neha Kakkar, Ikka, Dhvani Bhanushali, Tanishk Bagchi"

        }, {
            "name": "Badtameez Dil",
            "source": "Badtameez Dil.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/7920/thumb-yeh-jawaani-hai-deewani-2013-300.jpg",
            "singer": "Benny Dayal Shefali Alvaris"

        }, {
            "name": "Kar Gayi Chull",
            "source": "Kar Gayi Chull.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/12990/thumb-kapoor-and-sons-2016-hindi-mp3-songs111-300.jpg",
            "singer": "Badshah, Fazilpuria, Sukriti Kakar, Neha Kakkar"

        }, {
            "name": "Main Tera Boyfriend  ",
            "source": "Main Tera Boyfriend.mp3",
            "image": "https://img.wynk.in/unsafe/275x275/filters:no_upscale():format(webp)/http://s3-ap-south-1.amazonaws.com/wynk-music-cms/srch_hungama/music/8902894359023/1616091668/srch_hungama_26729827.jpg",
            "singer": "Neha Kakkar, Arijit Singh"

        }, {
            "name": "Abhi Toh Party Shuru Hui Hai  ",
            "source": "Abhi Toh Party Shuru Hui Hai.mp3",
            "image": "https://i1.wp.com/filmisongs.com/wp-content/uploads/2021/01/Abhi-Toh-Party-Shuru-Hui-Hai-Song-Khoobsurat.jpg?resize=450%2C253&ssl=1",
            "singer": "Badshah, Aastha"

        },
        //----------------------------------------------------------------------------------------
        {
            "name": "Duniya Chhor Doon",
            "source": "Duniya Chhor Doon.mp3",
            "image": "https://www.ilyricshub.com/wp-content/uploads/2021/10/duniya-chhod-doon-darshan-raval-300x169.jpg",
            "singer": "Darshan raval"

        }, {
            "name": "Tera Naam",
            "source": "Tera Naam.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/146128-tera-naam-darshan-raval-mp3-song-300.jpg",
            "singer": "Darshan Raval, Tulsi Kumar"

        }, {
            "name": "Moonlight",
            "source": "Moonlight.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113461/144707-moonlight-harnoor-mp3-song-300.jpg",
            "singer": "Harnoor, MXRCI, Ilam"

        }, {
            "name": "Dil ko karaar Aaya",
            "source": "Dil Ko Karaar Aaya.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113462/143979-dil-ko-karaar-aaya-neha-kakkar-mp3-song-300.jpg",
            "singer": "Neha Kakaar"

        }, {
            "name": "Dil Galti Kar Baitha Hai",
            "source": "Dil Galti Kar Baitha Hai.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/146081-dil-galti-kar-baitha-hai-jubin-nautiyal-mp3-song-300.jpg",
            "singer": "Jubin Nautiyal, Meet Bros, Shardul Rathod"

        }, {
            "name": "Saawariya",
            "source": "Saawariya.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/146157-saawariya-aastha-gill-mp3-song-300.jpg",
            "singer": "Kumar Sanu, Aastha Gill"

        }, {
            "name": "Mehendi",
            "source": "Mehendi.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/146056-mehendi-dhvani-bhanushali-mp3-song-300.jpg",
            "singer": "Dhvani Bhanushali,Vishal Dadlani"

        }, {
            "name": "Lagann Laagii (Sufi Version)",
            "source": "Lagann Laagii.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113548/146137-lagann-laagii-sufi-version-meer-jasu-mp3-song-300.jpg",
            "singer": "Meer Jasu, Himesh Reshammiya"

        }, {
            "name": "Jannat Ve",
            "source": "Jannat Ve.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/145898-jannat-ve-darshan-raval-song-mp3-song-300.jpg",
            "singer": "Darshan Raval, Nirmaan, Lijo George"

        }, {
            "name": "Rim Jhim",
            "source": "Rim Jhim.mp3",
            "image": "https://www.pagalworld.pw/GpE34Kg9Gq/113514/146036-rim-jhim-jubin-nautiyal-mp3-song-300.jpg",
            "singer": "Jubin Nautiyal, Ami Mishra"

        }
    ]
}
var audio, playbtn, title, poster, artists, seekslider, seeking = false,
    seekto, currenttimetext, durationtimetext, playlist_status, dir, playlist, ext, agent, playlists_artists, repeat, random;
dir = "music/";
// playlist = ["Cartoon - On & On" , "Diviners-X-Riell-Slow" , "InfiNoise-Sunlight","Jone - Everything","Last Heroes x TwoWorldsApart - Eclipse","Lost Sky - Fearless pt.II","Xaia, Rain Man, Oly - Breakdown"]

// title =["Cartoon - On & On" , "Slow" , "Sunlight","Everything","Last Heroes","Fearless","Breakdown"]
// poster=["images/1.jpg","images/2.jpg","images/3.jpg","images/4.jpg","images/5.jpg","images/6.jpg","images/7.jpg"]
// artists=["Daniel Levi", "Diviners-X-Riell","Nilka","Jone","AERYN","Chris Linton","Xaia, Rain Man, Oly"]
var liindex = sessionStorage.getItem('liindex');

//     title.innerText = array["song"][playlist_index]["name"];
//     audio.src = `music/${array["song"][playlist_index]["source"]}`;
//     cover.src = `${array["song"][playlist_index]["image"]}`;
//     singer.innerHTML = `${array["song"][playlist_index]["singer"]}`
console.log(liindex)
playlist_index = liindex;
console.log(playlist_index);
ext = ".mp3"
agent = navigator.userAgent.toLowerCase();
if (agent.indexOf('firefox') != -1 || agent.indexOf('opera') != -1) {
    ext = ".ogg";
}
playbtn = document.getElementById("playpausebtn");
nextbtn = document.getElementById("nextbtn");
prevbtn = document.getElementById("prevbtn");
seekslider = document.getElementById("seekslider");
currenttimetext = document.getElementById("currenttimetext");
durationtimetext = document.getElementById("durationtimetext");
playlist_status = document.getElementById("playlist_status");
playlists_artists = document.getElementById("playlist_artist");
repeat = document.getElementById("repeat");
randomSong = document.getElementById("random");

audio = new Audio();
audio.src = dir + `${array["song"][playlist_index]["source"]}`;
// audio.play();
audio.loop = false;
$("#image").attr("src", `${array["song"][playlist_index]["image"]}`);

playlist_status.innerHTML = `${array["song"][playlist_index]["name"]}`;
playlists_artists.innerHTML = `${array["song"][playlist_index]["singer"]}`;

// document.querySelector(".playpause").classList.add("active");
playbtn.addEventListener("click", playPause);
nextbtn.addEventListener("click", nextSong);
prevbtn.addEventListener("click", prevSong);
seekslider.addEventListener("mousedown", function(event) {
    seeking = true;
    seek(event);
});
seekslider.addEventListener("mousemove", function(event) { seek(event); });

seekslider.addEventListener("mouseup", function() { seeking = false; });

audio.addEventListener("timeupdate", function() { seektimeupdate(); });
audio.addEventListener("ended", function() {
    switchTrack();
});
repeat.addEventListener("click", loop);
randomSong.addEventListener("click", random);




//functions

function fetchMusicDetail() {
    $("#image").attr("src", `${array["song"][playlist_index]["image"]}`);

    playlist_status.innerHTML = `${array["song"][playlist_index]["name"]}`;
    playlist_artist.innerHTML = `${array["song"][playlist_index]["singer"]}`;

    audio.src = dir + `${array["song"][playlist_index]["source"]}`;
    audio.play();
}


function getRandomNumber(min, max) {
    let step1 = max - min + 1;
    let step2 = Math.random() * step1;
    let result = Math.floor(step2) + min;
    return result;
}

function random() {
    let randomIndex = getRandomNumber(0, 49);
    playlist_index = randomIndex;
    fetchMusicDetail();
    document.querySelector(".playpause").classList.add("active");
}

function loop() {
    if (audio.loop) {
        audio.loop = false;
        document.querySelector(".loop").classList.remove("active");
    } else {
        audio.loop = true;
        document.querySelector(".loop").classList.add("active");
    }
}

function nextSong() {
    document.querySelector(".playpause").classList.add("active");
    playlist_index++;
    if (playlist_index > 49) {
        playlist_index = 0;
    }
    fetchMusicDetail();
}

function prevSong() {
    document.querySelector(".playpause").classList.add("active");
    playlist_index--;
    if (playlist_index < 0) {
        playlist_index = 49;
    }
    fetchMusicDetail();
}

function playPause() {
    if (audio.paused) {
        audio.play();
        document.querySelector(".playpause").classList.add("active");
    } else {
        audio.pause();
        document.querySelector(".playpause").classList.remove("active");
    }
}

function switchTrack() {
    if (playlist_index == (49)) {
        playlist_index = 0;
    } else {
        playlist_index++;
    }
    fetchMusicDetail();
}

function seek(event) {
    if (audio.duration == 0) {
        null
    } else {
        if (seeking) {
            seekslider.value = event.clientX - seekslider.offsetLeft;
            seekto = audio.duration * (seekslider.value / 100);
            audio.currentTime = seekto;
        }
    }
}

function seektimeupdate() {
    if (audio.duration) {
        var nt = audio.currentTime * (100 / audio.duration);
        seekslider.value = nt;
        var curmins = Math.floor(audio.currentTime / 60);
        var cursecs = Math.floor(audio.currentTime - curmins * 60);
        var durmins = Math.floor(audio.duration / 60);
        var dursecs = Math.floor(audio.duration - durmins * 60);
        if (cursecs < 10) { cursecs = "0" + cursecs; }
        if (dursecs < 10) { dursecs = "0" + dursecs; }
        if (curmins < 10) { curmins = "0" + curmins; }
        if (durmins < 10) { durmins = "0" + durmins; }
        currenttimetext.innerHTML = curmins + ":" + cursecs;
        durationtimetext.innerHTML = durmins + ":" + dursecs;
    } else {
        currenttimetext.innerHTML = "00" + ":" + "00";
        durationtimetext.innerHTML = "00" + ":" + "00";
    }
}

let checkbox = document.querySelector('input[name=theme]');
checkbox.addEventListener('change', function() {
    if (this.checked) {
        document.documentElement.setAttribute('data-theme', 'light');
        // document.getElementById("svg25").add();

        document.getElementById("back-player").src = "images/white.png";

    } else {
        document.documentElement.setAttribute('data-theme', 'dark');
        document.getElementById("back-player").src = "images/black.png";
    }
})
var backbutton = document.getElementById('back');
backbutton.addEventListener('click', function() {
    window.location.href = "main.html";

})